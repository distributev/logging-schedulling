{"version":3,"sources":["app/account/signup/signup.controller.js"],"names":[],"mappings":"AAAA;;;;;;IAEM,gB;AACJ;;AAEA,4BAAY,IAAZ,EAAkB,MAAlB,EAA0B;AAAA;;AACtB,SAAK,IAAL,GAAY,IAAZ;AACA,SAAK,MAAL,GAAc,MAAd;AACD;AACD;;;;;6BAGO,I,EAAM;AAAA;;AACb,WAAK,SAAL,GAAiB,IAAjB;;AAEA,UAAI,KAAK,MAAT,EAAiB;AACf,aAAK,IAAL,CAAU,UAAV,CAAqB;AACjB,gBAAM,KAAK,IAAL,CAAU,IADC;AAEjB,iBAAO,KAAK,IAAL,CAAU,KAFA;AAGjB,oBAAU,KAAK,IAAL,CAAU;AAHH,SAArB,EAKG,IALH,CAKQ,YAAM;AACV;AACA,gBAAK,MAAL,CAAY,EAAZ,CAAe,MAAf;AACD,SARH,EASG,KATH,CASS,eAAO;AACZ,gBAAM,IAAI,IAAV;AACA,gBAAK,MAAL,GAAc,EAAd;;AAEA;AACA,cAAI,IAAI,IAAR,EAAc;AACZ,oBAAQ,OAAR,CAAgB,IAAI,MAApB,EAA4B,iBAAS;AACnC,mBAAK,KAAL,EAAY,YAAZ,CAAyB,UAAzB,EAAqC,KAArC;AACA,oBAAK,MAAL,CAAY,KAAZ,IAAqB,IAAI,OAAzB;AACD,aAHD;AAID;AACF,SApBH;AAqBD;AACF;;;;;;AAGH,QAAQ,MAAR,CAAe,qBAAf,EACG,UADH,CACc,kBADd,EACkC,gBADlC","file":"app/account/signup/signup.controller.js","sourcesContent":["'use strict';\n\nclass SignupController {\n  //end-non-standard\n\n  constructor(Auth, $state) {\n      this.Auth = Auth;\n      this.$state = $state;\n    }\n    //start-non-standard\n\n\n  register(form) {\n    this.submitted = true;\n\n    if (form.$valid) {\n      this.Auth.createUser({\n          name: this.user.name,\n          email: this.user.email,\n          password: this.user.password\n        })\n        .then(() => {\n          // Account created, redirect to home\n          this.$state.go('main');\n        })\n        .catch(err => {\n          err = err.data;\n          this.errors = {};\n\n          // Update validity of form fields that match the bookshelf errors\n          if (err.name) {\n            angular.forEach(err.fields, field => {\n              form[field].$setValidity('mongoose', false);\n              this.errors[field] = err.message;\n            });\n          }\n        });\n    }\n  }\n}\n\nangular.module('angularFullstackApp')\n  .controller('SignupController', SignupController);\n"],"sourceRoot":"/source/"}
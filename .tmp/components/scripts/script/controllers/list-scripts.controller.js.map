{"version":3,"sources":["components/scripts/script/controllers/list-scripts.controller.js"],"names":[],"mappings":";;AAAA,CAAC,YAAW;AACV;;AAEA,UACG,MADH,CACU,aADV,EAEG,UAFH,CAEc,uBAFd,EAEuC,qBAFvC;;AAIA,wBAAsB,OAAtB,GAAgC,CAAC,QAAD,EAAW,IAAX,EAAiB,WAAjB,EAA8B,UAA9B,EAA0C,WAA1C,EAAuD,kBAAvD,EAA2E,iBAA3E,EAA8F,QAA9F,CAAhC;;AAEA,WAAS,qBAAT,CAA+B,MAA/B,EAAuC,EAAvC,EAA2C,SAA3C,EAAsD,QAAtD,EAAgE,SAAhE,EAA2E,gBAA3E,EAA6F,eAA7F,EAA8G,MAA9G,EAAsH;AACpH,QAAI,QAAQ,MAAZ;AACA,QAAI,sBAAsB,IAA1B;AACA,QAAI,KAAK,IAAT;AACA,QAAI,YAAY,GAAG,UAAnB;AACA,OAAG,UAAH,GAAgB,EAAhB;AACA,OAAG,SAAH,GAAe,EAAf;AACA,OAAG,IAAH,GAAU,OAAO,UAAP,EAAV;AACA,QAAI,UAAU,GAAG,OAAH,IAAc,EAA5B;AACA;AACA,cAAU,WAAV,EAAuB,IAAvB;;AAEA,OAAG,SAAH,GAAe,iBAAiB,aAAjB,CAA+B,YAA/B,EACV,YADU,CACG,MADH,EAEV,UAFU,CAEC,YAFD,EAEe,IAFf,EAGV,UAHU,CAGC,YAHD,EAGe,OAHf,EAIV,UAJU,CAIC,YAJD,EAIe,UAAS,GAAT,EAAc;AACtC;AACA,eAAS,QAAQ,OAAR,CAAgB,GAAhB,EAAqB,QAArB,EAAT,EAA0C,KAA1C;AACD,KAPU,EAQV,kBARU,CAQS,cART,EASV,OATU,CASF,OATE,CAAf,CAZoH,CAqB7F;AACtB,QAAI,cAAc,SAAd,WAAc,GAAU;AACzB,SAAG,IAAH,GAAU,OAAO,UAAP,EAAV;AACF,KAFD;;AAIC,QAAI,cAAc,SAAd,WAAc,GAAU;AACxB;AACA,SAAG,SAAH,GAAe,CACjB,gBAAgB,SAAhB,CAA0B,IAA1B,EAAgC,SAAhC,CAA0C,SAA1C,EAAqD,WAArD,GAAmE,UAAnE,CAA8E,OAA9E,EAAuF,MAAvF,EACG,UADH,CACc,UAAS,IAAT,EAAe,IAAf,EAAqB,IAArB,EAA2B;AACrC,eAAO,6DAAP;AACD,OAHH,CADiB,EAKjB,gBAAgB,SAAhB,CAA0B,OAA1B,EAAmC,SAAnC,CAA6C,OAA7C,EAAsD,WAAtD,EALiB,EAMjB,gBAAgB,SAAhB,CAA0B,UAA1B,EAAsC,SAAtC,CAAgD,UAAhD,EAA4D,WAA5D,EANiB,EAOjB,gBAAgB,SAAhB,CAA0B,SAA1B,EAAqC,SAArC,CAA+C,UAA/C,EAA2D,WAA3D,EAPiB,CAAf;AAWH,KAbD;AAcA,QAAK,eAAgB,SAAhB,YAAgB,GAAW;AAC9B,UAAI,WAAW,GAAG,KAAH,EAAf;AACA,eAAS,OAAT,CAAiB,GAAG,IAApB;AACA,aAAO,SAAS,OAAhB;AACD,KAJD;AAKH;AACF,CAvDD","file":"components/scripts/script/controllers/list-scripts.controller.js","sourcesContent":["(function() {\n  'use strict';\n\n  angular\n    .module('flowScripts')\n    .controller('ListScriptsController', ListScriptsController);\n\n  ListScriptsController.$inject = ['$scope', '$q', '$interval', '$compile', '$uibModal', 'DTOptionsBuilder', 'DTColumnBuilder', 'Script'];\n\n  function ListScriptsController($scope, $q, $interval, $compile, $uibModal, DTOptionsBuilder, DTColumnBuilder, Script) {\n    var scope = $scope;\n    var refreshDataInterval = null;\n    var vm = this;\n    var titleHtml = vm.scriptType;\n    vm.dtInstance = {};\n    vm.dtColumns = {};\n    vm.data = Script.getScripts();\n    var perPage = vm.perPage || 10;\n    //refres data\n    $interval(refreshData ,5000);\n\n    vm.dtOptions = DTOptionsBuilder.fromFnPromise(getTableData)\n        .withDataProp('data')\n        .withOption('responsive', true)\n        .withOption('pageLength', perPage)\n        .withOption('createdRow', function(row) {\n          // Recompiling so we can bind Angular directive to the DT\n          $compile(angular.element(row).contents())(scope);\n        })\n        .withPaginationType('full_numbers')\n        .withDOM('lrtip'); // remove searching\n     var refreshData = function(){\n        vm.data = Script.getScripts();\n     } \n\n      var listScripts = function(){\n          //print out the columns\n          vm.dtColumns = [\n        DTColumnBuilder.newColumn(null).withTitle(titleHtml).notSortable().withOption('width', '15px')\n          .renderWith(function(data, type, full) {\n            return '<input type=\"checkbox\" ng-click=\"listJobsCtrl.toggleOne()\">';\n          }),\n        DTColumnBuilder.newColumn('state').withTitle('State').notSortable(),\n        DTColumnBuilder.newColumn('location').withTitle('Location').notSortable(),\n        DTColumnBuilder.newColumn('nextRun').withTitle('Next run').notSortable()\n\n      ];\n\n      }\n      var  getTableData  = function() {\n        var deferred = $q.defer();\n        deferred.resolve(vm.data); \n        return deferred.promise;\n      };\n  }\n})();\n"],"sourceRoot":"/source/"}
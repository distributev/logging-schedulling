{"version":3,"sources":["components/jobs/kue/services/job.service.js"],"names":[],"mappings":"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","file":"components/jobs/kue/services/job.service.js","sourcesContent":["/* jshint camelcase: false */\n(function() {\n  'use strict';\n\n  angular\n    .module('kueJobs')\n    .factory('Job', JobService);\n\n  JobService.$inject = [];\n\n  function JobService() {\n\n    function Job(data) {\n      if (data) {\n        this.setData(data);\n      }\n\n      Object.defineProperty(this, 'started', {\n        enumerable: true,\n        configurable: false,\n        get: function() {\n          if (this.started_at) {\n            var today = moment();\n            var startedAt = this.started_at / 1000;\n            var started = moment.unix(startedAt);\n\n            if (today.diff(started, 'days') > 0) {\n              return started.format('MMMM Do YYYY, h:mm:ss a');\n            } else {\n              return started.fromNow();\n            }\n          } else {\n            return null;\n          }\n        }\n      });\n\n      Object.defineProperty(this, 'finished', {\n        enumerable: true,\n        configurable: false,\n        get: function() {\n          if (this.state === 'complete' || this.state === 'failed') {\n            var today = moment();\n            var finishedAt = this.updated_at / 1000;\n            var finished = moment.unix(finishedAt);\n\n            if (today.diff(finished, 'days') > 0) {\n              return finished.format('MMMM Do YYYY, h:mm:ss a');\n            } else {\n              return finished.fromNow();\n            }\n          } else {\n            return null;\n          }\n        }\n      });\n\n      Object.defineProperty(this, 'humanizeDuration', {\n        enumerable: true,\n        configurable: false,\n        get: function() {\n          return this.duration ? moment.duration(parseInt(this.duration)).humanize() : null;\n        }\n      });\n\n      Object.defineProperty(this, 'dataAsString', {\n        enumerable: true,\n        configurable: false,\n        get: function() {\n          return JSON.stringify(this.data, null, 2);\n        }\n      });\n\n      Object.defineProperty(this, 'customState', {\n        enumerable: true,\n        configurable: false,\n        get: function() {\n          if (this.state === 'active') {\n            return 'running';\n          } else if (this.state === 'inactive') {\n            return 'queued';\n          } else {\n            return this.state;\n          }\n        }\n      });\n\n      Object.defineProperty(this, 'attemptsAsString', {\n        enumerable: true,\n        configurable: false,\n        get: function() {\n          return JSON.stringify(this.attempts, null, 2);\n        }\n      });\n\n      Object.defineProperty(this, 'state_label_class', {\n        enumerable: true,\n        configurable: false,\n        get: function() {\n          return Job.stateLabelMapping[this.state] || 'label-default';\n        }\n      });\n    }\n\n    Job.states = [\n      'active',\n      'complete',\n      'delayed',\n      'failed',\n      'inactive'\n    ];\n\n    Job.stateLabelMapping = {\n      active: 'label-primary',\n      complete: 'label-success',\n      delayed: 'label-warning',\n      failed: 'label-danger',\n      inactive: 'label-inactive'\n    };\n\n    Job.prototype = {\n      setData: function(data) {\n        angular.extend(this, data);\n        this.duration = data.duration || null;\n        this.state = data.state || null;\n      }\n    };\n    return Job;\n  }\n})();\n"],"sourceRoot":"/source/"}